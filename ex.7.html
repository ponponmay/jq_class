<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>select option change</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
            crossorigin="anonymous"
        />
    </head>
    <body>
        <div class="container mt-5">
            <form class="row g-2" action="">
                <div class="col-auto">
                    <select class="form-control" name="city" id="city">
                        <option value="0">基隆</option>
                        <option value="1">台北</option>
                        <option value="2">新北</option>
                    </select>
                </div>

                <div class="col-auto">
                    <select class="form-control" name="district" id="district">
                        <option value="0">七堵區</option>
                        <option value="1">中正區</option>
                        <option value="2">暖暖區</option>
                    </select>
                </div>
            </form>
        </div>

        <script
            src="https://code.jquery.com/jquery-3.6.3.min.js"
            integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU="
            crossorigin="anonymous"
        ></script>
        <script>
            // 1.先綁定事件
            $('#city').change(function(e){
                console.log('city change')
                // 2.抓到目前選取的城市
                $('#city').val()
                console.log('city val= ' , $('#city').val())
                let current_city_index = $('#city').val()
                let districtArray = [
                    ['七堵', '中正', '暖暖'],
                    ['中正', '大安', '信義'],
                    ['蘆洲', '三重', '新店', '板橋' , '樹林'],
                 ];
                // 2-2.選取陣列到現在的區 
                console.log('current_district' ,districtArray[current_city_index])
                let current_district = districtArray[current_city_index]

                // 3.替換地區選項的html

                for( i=0 ; i<current_district.length ; i++){
                    console.log('11111' ,current_district[i] )
                    if(i==0){
                        // 清除之前產生的html
                        $('#district').empty()
                        $('#district').append(`<option value="${i}">${current_district[i]}區</option>`)
                    }else{
                        $('#district').append(`<option value="${i}">${current_district[i]}區</option>`)  
                    }
                    
                    
            }
                

            })

        </script>
    </body>
</html>
